#{extends 'main.html' /}
#{set title:'Home' /}
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
</head>  
<body>

  <nav class="menu push-menu-left">
    <ul>
        <li><button class="close-menu">pin</button></li>
        <li><a href="feed.html">Home</a></li>
        <li><a href="#">Saved for Later</a></li>
        <li><a id="addChannel" href="#">Add content</a></li>
        <li><a href="#">All</a></li>        
        <li><a href="index.html">Main page</a></li>        
    </ul>
  </nav>

  <div id="wrapper">
    <div id="main">
        <div class="container">
            <h2 class="my-header">
                Featured
            </h2>
            <div class="container">
                <div class="row">
                    #{list items:firstThreeItems, as:'item'}
                      <div class="col-xs-4">
                          <div class="my-item">
                              <div class="thumbnail">
                                  <img src=${item.image} class="item-picture" alt="">
                                  <h3>
                                      ${item.title}
                                  </h3>
                                  <p class="description">
                                      ${item.description.raw()}
                                  </p>
                              </div>
                          </div>
                      </div>
                    #{/list}
                </div>
          </div>

        <ul class="media-list">
            <a href="channel.html">
              <h2 class="my-header"> 
                  Channel1
              </h2>           
            </a>
            #{list items:otherItems, as:'item'}
                <div class="my-item">
                    <li class="media">
                        <a href="#" class="pull-left">
                            <img src=${item.image} class="media-object mpicture" alt="tide">
                        </a>
                        <div class="media-body">
                            <h4 class="media-heading">${item.title}</h4>
                            <p>${item.description.raw()}</p>
                        </div>
                    </li>
                </div>
            #{/list}
        </div>
    </div>
  </div>

<div class="modal fade" id="basicModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 id="header" class="modal-title" id="myModalLabel">Basic Modal</h4>
      </div>
      <div class="modal-body">                    
            <img id="picture" src="@{'/public/images/tide.jpg'}" alt="tide">
            <p id="text">Rom cernitur sum ulterius agi temporis ineptire uti exhibent. Etiamsi ut pugnare ad luminis si gi laborio dominum judicem. Si humanas affirmo et admitto innatas id fictile is creando. Imo qua invitus sic utilius praeter. Obversari incurrant dubitarem facultate tollentur est percipere sub nos. Aeque has motus eodem verba capax vos ullam.            
            </p>
            <p>
              <small><i>Posted on January 10, 2014</i></small>
            </p>
            <div class="social-likes">
              <div class="facebook" title="Поделиться ссылкой на Фейсбуке">Facebook</div>
              <div class="twitter" title="Поделиться ссылкой в Твиттере">Twitter</div>  
              <div class="vkontakte" title="Поделиться ссылкой во Вконтакте">Вконтакте</div>  
              <div class="plusone" title="Поделиться ссылкой в Гугл-плюсе">Google+</div>
            </div>
      </div>
      <div class="modal-footer">        
        <button type="button" class="btn btn-primary">Mark as unread</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="addChannelModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 id="header" class="modal-title" id="myModalLabel">Add channel</h4>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="exampleInputEmail1">Url</label>
          <input type="email" class="form-control" id="inputUrl" placeholder="Enter url">
        </div>
      </div>      
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="add">Add</button>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">

    $("#add").click(function() {
        var newUrl = $("#inputUrl").val();
        alert(newUrl);
        var addChannel = #{jsRoute @Application.addChannel(':url') /}
            $.ajax({
                url: addChannel.url({url: newUrl}),
                type: addChannel.method
//            data: 'user.name=Guillaume'
        });
    });

    $("#addChannel").click(function() {
        $('#addChannelModal').modal('toggle');
    })

    $(".my-item").on("click", function() {
      $('#basicModal').modal('toggle');
      $('#picture').attr("src", $(this).find("img").attr("src"));
      $('#header').html($(this).find("h4").html());
      var children =  $(this).find("p").children()
//        alert(children);
//      $('#text').appendChild($(this).find("p").children());
        $('#text').appendChild(children);
    })

</script>


  </body>
</html>